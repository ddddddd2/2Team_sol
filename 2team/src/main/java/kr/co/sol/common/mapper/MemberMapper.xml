<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.sol.common.dao.MemberDAO">
  	<select id="idCheck" parameterType="string"  resultType="int">
    	select count(id) cnt from member where id = #{id}
  	</select>
  	
  	<insert id="signUpProc" parameterType="mdto">
  		<selectKey keyProperty="no" resultType="int" order="BEFORE">
	       SELECT NVL(MAX(no),0)+1 no FROM member
      	</selectKey>
  		
  		insert into member(no,id,passwd,name,email,phone,gender)
  		values( #{no},
  				#{id},
  				#{passwd},
  				#{name},
  				#{email},
  				#{phone},
  				#{gender})
  	</insert>
  	<select id="loginPro" parameterType="mdto" resultType="mdto">
  		select no,grade_name, id, nick_name, name, email, phone, gender, role, createdate, image, info_offering from member where id = #{id} and passwd = #{passwd}
  	</select>
  	<select id="getMemberList" resultType="mdto">
  		select
  			no,
	  		grade_name,
	  		id,
	  		passwd,
	  		name,
	  		email,
	  		phone,
	  		gender,
  			role
  		from member
  	</select>
  	<select id="getMemberInfo" parameterType="Integer" resultType="mdto">
  		select
  			no,
	  		grade_name,
	  		id,
	  		passwd,
	  		nick_name,
	  		name,
	  		email,
	  		phone,
	  		gender,
  			role,
  			info_offering
  		from member
  		where
  			no = #{no}
  	</select>
  	<select id="nickCheck" parameterType="String" resultType="Integer">
  		select count(nick_name) from member where nick_name = #{nick_name}
  	</select>
  	
  	<select id="emailCheck" parameterType="String" resultType="Integer">
  		select count(email) from member where email = #{email}
  	</select>
  	
	<!-- Member(메뉴바 쪽에 있는 이름, 회원가입 날짜) -->
	<select id="getMember" parameterType="Integer" resultType="mdto">
		select 
			no, grade_name, id, passwd, name, email, phone, gender, role, nick_name, createdate, image 
		from
			member
		where
			no = #{no}
	</select>
</mapper>